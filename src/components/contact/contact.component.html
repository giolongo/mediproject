<main class="contact-layout" @slideInFromLeft>
    <!-- Contact Hero -->
    <header class="contact-hero">
        <!-- Using a dark abstract background if no specific contact image exists, or re-using team.jpg with heavy overlay -->
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1>Parliamo del tuo progetto</h1>
            <p>Siamo qui per ascoltare le tue idee e trasformarle in realt√†.</p>
        </div>
    </header>

    <!-- Floating Form Card -->
    <div class="contact-content-card">
        <div class="card-header">
            <h2>Contattaci</h2>
            <div class="divider"></div>
        </div>

        <form [formGroup]="contactForm" (ngSubmit)="sendEmail()">
            <div class="form-grid">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Nome</mat-label>
                    <input matInput formControlName="name" required />
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Numero di Telefono</mat-label>
                    <input matInput formControlName="telephone" required type="text" />
                </mat-form-field>
            </div>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" required type="email" />
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Oggetto</mat-label>
                <mat-select formControlName="subject" required>
                    <mat-option value="Assistenza">Assistenza</mat-option>
                    <mat-option value="Preventivo">Preventivo</mat-option>
                    <mat-option value="Richieste Generali">Richieste Generali</mat-option>
                    <mat-option value="Richiesta Info Prodotto">Richiesta Info Prodotto</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Messaggio</mat-label>
                <textarea matInput formControlName="message" required rows="5"></textarea>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width captcha-field">
                <mat-label>Quanto fa {{ captchaA }} + {{ captchaB }}?</mat-label>
                <input matInput type="number" formControlName="captcha" required />
                <mat-error *ngIf="contactForm.controls['captcha'].hasError('invalidCaptcha')">
                    Risposta errata.
                </mat-error>
            </mat-form-field>

            <div class="form-actions">
                <button *ngIf="!inLoading" mat-raised-button color="primary" type="submit"
                    [disabled]="contactForm.invalid" class="submit-btn">
                    INVIA MESSAGGIO
                </button>
                <mat-spinner *ngIf="inLoading" diameter="30"></mat-spinner>
            </div>
        </form>

        <div class="contact-footer">
            <span>Oppure scrivici direttamente:</span>
            <a href="mailto:info@medicontractltd.com" class="direct-link">
                <mat-icon>email</mat-icon> info&#64;medicontractltd.com
            </a>
        </div>
    </div>
</main>